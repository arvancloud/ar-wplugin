jQuery.uaMatch=function(t){var e;return t=t.toLowerCase(),{browser:(e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[])[1]||"",version:e[2]||"0"}},function(x){var y,S="ui-state-active",T="ui-state-hover",s="ui-state-disabled",M=x.ui.keyCode,O=M.UP,W=M.DOWN,k=M.RIGHT,N=M.LEFT,B=M.PAGE_UP,E=M.PAGE_DOWN,I=M.HOME,V=M.END,L=x.uaMatch.msie,c=x.uaMatch.mozilla?"DOMMouseScroll":"mousewheel",A=".uispinner",D=[O,W,k,N,B,E,I,V,M.BACKSPACE,M.DELETE,M.TAB];x.widget("ui.spinner",{options:{min:null,max:null,allowNull:!1,group:"",point:".",prefix:"",suffix:"",places:null,defaultStep:1,largeStep:10,mouseWheel:!0,increment:"slow",className:null,showOn:"always",width:95,upIconClass:"ui-icon-triangle-1-n",downIconClass:"ui-icon-triangle-1-s",addText:"+",subText:"-",format:function(t,e){var n=this,i=/(\d+)(\d{3})/,s=Number(t),o=(isNaN(t)?0:Math.abs(s)).toFixed(e)+"";for(o=o.replace(".",n.point);i.test(o)&&n.group;o=o.replace(i,"$1"+n.group+"$2"));return(t<0?"-":"")+n.prefix+o+n.suffix},parse:function(t){var e=this;return"."===e.group&&(t=t.replace(".","")),"."!==e.point&&(t=t.replace(e.point,".")),parseFloat(t.replace(/[^0-9\-\.]/g,""))}},_create:function(){var t=this,e=t.element,n=e.attr("type");!e.is("input")||"text"!==n&&"number"!==n?console.error("Invalid target for ui.spinner"):(t._procOptions(!0),t._createButtons(e),e.is(":enabled")||t.disable())},_createButtons:function(t){var e,o,a,n,i,s,u,r,l,c,p,d,h=this,m=h.options,f=m.className,v=m.width,b=m.showOn,g=t.outerHeight();function _(){return c&&(x(this).removeClass(S),h._stopSpin(),c=!1),!1}function w(t){if(i){if(t===s)return;clearTimeout(i)}s=t,i=setTimeout(function(){i=0,t()},100)}function C(t){for(var e=D.length,n=0;n<e;n+=1)if(D[n]===t)return 1}e=t.wrap('<span class="spinner-wrpr" />').css({width:(h.oWidth=t.outerWidth())-v+"!important",marginRight:"30px",marginLeft:"30px",textAlign:"center",float:"none",marginTop:0}).after('<span class="ui-spinner ui-widget"></span>').next(),h.wrapper=e,p=x('<div class="ui-spinner-buttons"><div class="ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr"><span class="ui-icon '+m.upIconClass+'">'+m.addText+'</span></div><div class="ui-spinner-down ui-spinner-button ui-state-default ui-corner-br"><span class="ui-icon '+m.downIconClass+'">'+m.subText+"</span></div></div>"),h.btnContainer=p,d="rtl"===t[0].dir,f&&e.addClass(f),e.append(p.css({height:g,left:0,top:0})),(n=h.buttons=p.find(".ui-spinner-button")).css({width:"30px",height:+g}),n.eq(0).css({right:"0"}),n.eq(1).css({left:"0"}),o=n[0],a=n[1],n.find(".ui-icon"),p.width("135px"),"always"!==b&&p.css("opacity",0),"hover"!==b&&"both"!==b||n.add(t).bind("mouseenter"+A,function(){w(function(){u=!0,h.focused&&"hover"!==b||h.showButtons()})}).bind("mouseleave"+A,function(){w(function(){u=!1,h.focused&&"hover"!==b||h.hideButtons()})}),n.hover(function(){h.buttons.removeClass(T),m.disabled||x(this).addClass(T)},function(){x(this).removeClass(T)}).mousedown(function(){var t,e;return m.disabled||(t=h.element[0],e=o===this?1:-1,t.focus(),t.select(),x(this).addClass(S),c=!0,h._startSpin(e)),!1}).mouseup(_).mouseout(_),L&&n.dblclick(function(){return m.disabled||(h._change(),h._doSpin((this===o?1:-1)*m.step)),!1}).bind("selectstart",function(){return!1}),t.bind("keydown"+A,function(t){var e,n,i,s=t.keyCode;if(t.ctrl||t.alt)return!0;if(C(s)&&(l=!0),r)return!1;switch(s){case O:case B:e=1,n=s===B;break;case W:case E:T=-1,n=s===E;break;case k:case N:e=s===k^d?1:-1;break;case I:return null!==(i=h.options.min)&&h._setValue(i),!1;case V:return i=h.options.max,null!==(i=h.options.max)&&h._setValue(i),!1}return e?(r||m.disabled||(x(0<e?o:a).addClass(S),r=!0,h._startSpin(e,n)),!1):void 0}).bind("keyup"+A,function(t){if(t.ctrl||t.alt)return!0;switch(C(M)&&(l=!1),t.keyCode){case O:case k:case B:case W:case N:case E:return n.removeClass(S),h._stopSpin(),r=!1}}).bind("keypress"+A,function(t){if(e=t.keyCode,n=t.charCode,!(l||(i=String.fromCharCode(n||e),s=h.options,"0"<=i&&i<="9"||"-"===i||0<h.places&&i===s.point||i===s.group)))return!1;var e,n,i,s}).bind("change"+A,function(){h._change()}).bind("focus"+A,function(){function t(){h.element.select()}L?t():setTimeout(t,0),h.focused=!0,y=h,u||"focus"!==b&&"both"!==b||h.showButtons()}).bind("blur"+A,function(){h.focused=!1,u||"focus"!==b&&"both"!==b||h.hideButtons()})},_procOptions:function(t){var e,n=this,i=n.element,s=n.options,o=s.min,a=s.max,u=s.step,r=s.places,l=-1;"slow"===s.increment?s.increment=[{count:1,mult:1,delay:250},{count:3,mult:1,delay:100},{count:0,mult:1,delay:50}]:"fast"===s.increment&&(s.increment=[{count:1,mult:1,delay:250},{count:19,mult:1,delay:100},{count:80,mult:1,delay:20},{count:100,mult:10,delay:20},{count:0,mult:100,delay:20}]),null===o&&null!==(e=i.attr("min"))&&(o=parseFloat(e)),null===a&&null!==(e=i.attr("max"))&&(a=parseFloat(e)),u||null===(e=i.attr("step"))||"any"!==e&&(u=parseFloat(e),s.largeStep*=u),s.step=u=u||s.defaultStep,null===r&&-1!==(e=u+"").indexOf(".")&&(r=e.length-e.indexOf(".")-1),n.places=r,null!==a&&null!==o&&(a<o&&(o=a),l=Math.max(Math.max(l,s.format(a,r,i).length),s.format(o,r,i).length)),t&&(n.inputMaxLength=i[0].maxLength),0<(e=n.inputMaxLength)&&(l=0<l?Math.min(e,l):e,e=Math.pow(10,l)-1,(null===a||e<a)&&(a=e),e=-(e+1)/10+1,(null===o||o<e)&&(o=e)),0<l&&i.attr("maxlength",l),s.min=o,s.max=a,n._change(),i.unbind(c+A),s.mouseWheel&&i.bind(c+A,n._mouseWheel)},_mouseWheel:function(t){var e=x.data(this,"spinner");if(!e.options.disabled&&e.focused&&e===y)return e._change(),e._doSpin((0<(t.wheelDelta||-t.detail)?1:-1)*e.options.step),!1},_setTimer:function(t,e,n){var i=this;i._stopSpin(),i.timer=setInterval(function(){i._spin(e,n)},t)},_stopSpin:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},_startSpin:function(t,e){var n=this,i=n.options.increment;n._change(),n._doSpin(t*(e?n.options.largeStep:n.options.step)),i&&0<i.length&&(n.counter=0,n.incCounter=0,n._setTimer(i[0].delay,t,e))},_spin:function(t,e){var n=this,i=n.options.increment,s=i[n.incCounter];n._doSpin(t*s.mult*(e?n.options.largeStep:n.options.step)),n.counter+=1,n.counter>s.count&&n.incCounter<i.length-1&&(n.counter=0,s=i[++n.incCounter],n._setTimer(s.delay,t,e))},_doSpin:function(t){var e=this.curvalue;null===e&&(e=(0<t?this.options.min:this.options.max)||0),this._setValue(e+t)},_parseValue:function(){var t=this.element.val();return t?this.options.parse(t,this.element):null},_validate:function(t){var e=this.options,n=e.min,i=e.max;return null!==t||e.allowNull||(t=null!==this.curvalue?this.curvalue:n||i||0),null!==i&&(i<t||t===i)?(void 0!==this.buttons&&x(this.buttons[0]).addClass(s),i):null!==n&&(t<n||t===n)?(void 0!==this.buttons&&x(this.buttons[1]).addClass(s),n):(void 0!==this.buttons&&(x(this.buttons[0]).removeClass(s),x(this.buttons[1]).removeClass(s)),t)},_change:function(){var t=this._parseValue();this.selfChange||(isNaN(t)&&(t=this.curvalue),this._setValue(t,!0))},_setOption:function(t,e){x.Widget.prototype._setOption.call(this,t,e),this._procOptions()},increment:function(){this._doSpin(this.options.step)},decrement:function(){this._doSpin(-this.options.step)},showButtons:function(t){var e=this.btnContainer.stop();t?e.css("opacity",1):e.fadeTo("fast",1)},hideButtons:function(t){var e=this.btnContainer.stop();t?e.css("opacity",0):e.fadeTo("fast",0),this.buttons.removeClass(T)},_setValue:function(t,e){var n=this;n.curvalue=t=n._validate(t),n.element.val(null!==t?n.options.format(t,n.places,n.element):""),e||(n.selfChange=!0,n.element.change(),n.selfChange=!1)},value:function(t){return arguments.length?(this._setValue(t),this.element):this.curvalue},enable:function(){this.buttons.removeClass(s),this.element[0].disabled=!1,x.Widget.prototype.enable.call(this)},disable:function(){this.buttons.addClass(s).removeClass(T),this.element[0].disabled=!0,x.Widget.prototype.disable.call(this)},destroy:function(){this.wrapper.remove(),this.element.unbind(A).css({width:this.oWidth,marginRight:this.oMargin}),x.Widget.prototype.destroy.call(this)}})}(jQuery);